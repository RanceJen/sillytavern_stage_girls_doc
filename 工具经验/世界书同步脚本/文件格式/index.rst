************************************************************************************************************************
独立文件格式
************************************************************************************************************************

独立文件只需要放在你在配置文件中设定的 ``directory`` 内即可, 你可以为 "条目文件" 新建子文件夹, 或使用 "合集文件" 对条目进行分类管理.

========================================================================================================================
条目文件
========================================================================================================================

这种文件的文件名与世界书条目的标题相同, 后缀可以任意取 (如, 记事本的后缀 ".txt", markdown 的后缀 “.md”, yaml 的后缀 ".yaml", json 的后缀 ".json"; 当然只能用文本文件, word 的 ".doc" 这种就不行了).

例如,

.. figure:: 条目文件-世界书.png

可以对应于条目文件,

.. figure:: 条目文件-独立文件.png

.. _合集文件:

========================================================================================================================
合集文件
========================================================================================================================

有的时候我们需要做任务列表、道具列表, 这往往需要分条目, 且跨条目保持 yaml 或 json 格式.

合集文件就是为了实现这一点, 它的文件名必须以 "合集" 结尾, 且后缀为 ".json" 或 ".yaml".

例如, [#1]_

.. [#1] 例子格式源于 `超高自由度！XP大爆炸的魔法少女世界 <https://discord.com/channels/1134557553011998840/1265232579502542943>`_ (为什么我自己做人物卡时没学这个格式导致要重制😭)

.. figure:: 合集文件-世界书.png

可以对应于一个合集文件:

.. tabs::

  .. tab:: yaml 格式

    用 ``# ^条目名`` 来标识之后部分属于 "条目名" 这个条目.

    .. figure:: 合集文件-独立文件yaml.png

  .. tab:: json 格式

    用 ``// ^条目名`` 来标识之后部分属于 "条目名" 这个条目.

    .. figure:: 合集文件-独立文件json.png

========================================================================================================================
排除文件
========================================================================================================================

为了省 token, 我们也许会想把条目翻译成英文, 而又想保留原来的中文条目. 为此, 脚本对文件名以 ``!`` 做了特殊处理: 它会忽略以 ``!`` 结尾的文件.

.. figure:: 排除文件.png

========================================================================================================================
JSON 和 YAML 中的原始文本
========================================================================================================================

为了支持 xml tag 如 ``<基本信息></基本信息>`` 及 `提示词模板语法 <https://discord.com/channels/1134557553011998840/1336648321963524127>`_.

我为 JSON 和 YAML 提供了支持原始文本的方法, 具体地:

.. tabs::

  .. tab:: yaml 格式

    用 ``# :原始文本`` 来标识之后部分应该被原封不动地同步到酒馆中.

    .. figure:: 原始文本-yaml.png

  .. tab:: json 格式

    用 ``// :原始文本`` 来标识之后部分应该被原封不动地同步到酒馆中.

      .. figure:: 原始文本-json.png

.. warning::

  对使用原始文本意味着 pull 功能可能失效, 我还没找到非常泛用的实现方法.